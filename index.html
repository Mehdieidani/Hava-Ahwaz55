<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù‡ÙˆØ§Ø´Ù†Ø§Ø³ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
  <link href="https://cdn.jsdelivr.net/npm/vazir-font@v1.1.2/dist/font-face.css" rel="stylesheet">
  <style>
    body {
      font-family: Vazir, sans-serif;
      background: linear-gradient(to top, #e0f7fa, #ffffff);
      margin: 0;
      direction: rtl;
      color: #333;
    }
    header {
      background-color: #007acc;
      color: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .lang-toggle {
      background: white;
      color: #007acc;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    .search-box {
      padding: 1rem 2rem;
      text-align: center;
    }
    .search-box input {
      width: 70%;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 1rem;
    }
    .forecast-section {
      padding: 1rem 2rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    .hourly, .daily {
      background-color: white;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.1);
      padding: 1rem;
    }
    .hourly h2, .daily h2 {
      margin-top: 0;
    }
    .hour-list, .day-list {
      display: flex;
      overflow-x: auto;
      gap: 1rem;
      padding: 0.5rem 0;
    }
    .forecast-card {
      min-width: 120px;
      text-align: center;
      padding: 0.5rem;
      border-radius: 10px;
      background: #f1f8ff;
    }
    .forecast-card img {
      width: 50px;
      height: 50px;
    }
    .map-section {
      margin: 2rem;
      text-align: center;
    }
    .map-section img {
      width: 90%;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .city-image {
      margin: 1rem auto;
      text-align: center;
    }
    .city-image img {
      width: 200px;
      border-radius: 12px;
    }
    .ad-banner {
      position: fixed;
      bottom: 15px;
      left: 15px;
      background: white;
      border: 2px solid #007acc;
      border-radius: 12px;
      padding: 10px;
      z-index: 999;
      width: 250px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .ad-banner a {
      display: block;
      margin-top: 8px;
      color: #007acc;
      font-weight: bold;
      text-decoration: none;
    }
    .close-ad {
      position: absolute;
      top: 5px;
      right: 10px;
      color: red;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1 id="title">Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù‡ÙˆØ§</h1>
    <button class="lang-toggle" onclick="toggleLang()">AR</button>
  </header>

  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Ù†Ø§Ù… Ø´Ù‡Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯... (Ù…Ø«Ù„Ø§Ù‹ Ø§Ù‡ÙˆØ§Ø² ÛŒØ§ Ú©Ø§Ø¸Ù…ÛŒ Ø¯Ùˆ)" onkeydown="if(event.key==='Enter') fetchWeather()" />
  </div>

  <div class="city-image">
    <img id="cityImage" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Khuzestan_map.png/320px-Khuzestan_map.png" alt="Ù†Ù…Ø§ÛŒ Ø´Ù‡Ø±" />
  </div>

  <div class="forecast-section">
    <div class="hourly">
      <h2>Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø³Ø§Ø¹ØªÛŒ</h2>
      <div class="hour-list" id="hourlyForecast">
        <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¹ØªÛŒ -->
      </div>
    </div>

    <div class="daily">
      <h2>Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ûµ Ø±ÙˆØ²Ù‡</h2>
      <div class="day-list" id="dailyForecast">
        <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡ -->
      </div>
    </div>
  </div>

  <div class="map-section">
    <h2>Ù†Ù‚Ø´Ù‡ Ø¢Ø¨â€ŒÙˆÙ‡ÙˆØ§ÛŒÛŒ</h2>
    <img src="https://tile.openweathermap.org/map/precipitation_new/5/17/10.png?appid=dc9c93f51cdd375d459483c2a9f86d88" alt="Ù†Ù‚Ø´Ù‡ Ø¨Ø§Ø±Ø´">
  </div>

  <div class="ad-banner" id="adBanner">
    <span class="close-ad" onclick="document.getElementById('adBanner').style.display='none'">âœ•</span>
    <strong>ğŸ“ ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</strong>
    <a href="tel:09332356547">09332356547</a>
    <a href="https://t.me/your_channel" target="_blank">ØªÙ„Ú¯Ø±Ø§Ù… Ù…Ø§</a>
  </div>

  <script>
    const API_KEY = "dc9c93f51cdd375d459483c2a9f86d88"; // OpenWeatherMap
    const searchInput = document.getElementById("searchInput");

    function fetchWeather() {
      const city = searchInput.value.trim();
      if (!city) return;

      // ØªØµÙˆÛŒØ± Ù†Ù…Ø§Ø¯ÛŒÙ† Ø´Ù‡Ø± (ØªØºÛŒÛŒØ±ÛŒØ§ÙØªÙ‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø´Ù‡Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡)
      document.getElementById("cityImage").src = `https://source.unsplash.com/320x200/?${city}`;

      // Fetch hourly and daily forecast
      fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${API_KEY}&units=metric&lang=fa`)
        .then(res => res.json())
        .then(data => {
          const hourly = document.getElementById("hourlyForecast");
          const daily = document.getElementById("dailyForecast");
          hourly.innerHTML = "";
          daily.innerHTML = "";

          // Ø³Ø§Ø¹ØªÛŒ (Ø§ÙˆÙ„ÛŒÙ† 8 Ø¹Ø¯Ø¯: 3 Ø³Ø§Ø¹ØªÙ‡ Ø¯Ø± 24 Ø³Ø§Ø¹Øª)
          for (let i = 0; i < 8; i++) {
            const item = data.list[i];
            const card = `
              <div class="forecast-card">
                <p>${new Date(item.dt_txt).getHours()}:00</p>
                <img src="https://openweathermap.org/img/wn/${item.weather[0].icon}.png" />
                <p>${item.main.temp}Â°C</p>
              </div>
            `;
            hourly.innerHTML += card;
          }

          // Ø±ÙˆØ²Ø§Ù†Ù‡ (Ù‡Ø± 8 Ø¹Ø¯Ø¯ â‰ˆ 1 Ø±ÙˆØ²)
          for (let i = 0; i < 40; i += 8) {
            const item = data.list[i];
            const card = `
              <div class="forecast-card">
                <p>${new Date(item.dt_txt).toLocaleDateString('fa-IR')}</p>
                <img src="https://openweathermap.org/img/wn/${item.weather[0].icon}.png" />
                <p>${item.main.temp}Â°C</p>
              </div>
            `;
            daily.innerHTML += card;
          }
        });
    }

    function toggleLang() {
      const langBtn = document.querySelector('.lang-toggle');
      const title = document.getElementById('title');
      const currentLang = document.documentElement.lang;

      if (currentLang === 'fa') {
        document.documentElement.lang = 'ar';
        title.innerText = 'Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³';
        langBtn.innerText = 'FA';
        searchInput.placeholder = 'Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©... (Ù…Ø«Ù„Ø§Ù‹ Ø§Ù„Ø£Ø­ÙˆØ§Ø²)';
      } else {
        document.documentElement.lang = 'fa';
        title.innerText = 'Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù‡ÙˆØ§';
        langBtn.innerText = 'AR';
        searchInput.placeholder = 'Ù†Ø§Ù… Ø´Ù‡Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯...';
      }
    }
  </script>
</body>
</html>
